"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ThemeManagerView = exports.ThemeManagerModel = void 0;
const _ = require("underscore");
const base_1 = require("./base");
const widgets = require("@jupyter-widgets/base");
class ThemeManagerModel extends widgets.DOMWidgetModel {
    defaults() {
        return _.extend(widgets.DOMWidgetModel.prototype.defaults(), {
            _model_name: 'ThemeManagerModel',
            _model_module: 'nglview-js-widgets',
            _model_module_version: require("../package.json").version,
            _view_name: "ThemeManagerView",
            _view_module: "nglview-js-widgets",
            _view_module_version: require("../package.json").version,
        });
    }
}
exports.ThemeManagerModel = ThemeManagerModel;
class ThemeManagerView extends base_1.BaseView {
    render() {
        super.render();
        this.displayed.then(() => this.handleThemeChanged());
    }
    handleThemeChanged() {
        console.log("ThemeManagerView: handleThemeChanged");
        this.setTheme(this.model.get("_theme_css"));
    }
    handleEmbed() {
        this.handleThemeChanged();
    }
    setTheme(cssContent) {
        if (cssContent == undefined) {
            return;
        }
        var ele = document.getElementById('nglview_style');
        if (ele) {
            document.head.removeChild(ele);
        }
        ele = document.createElement('style');
        ele.id = 'nglview_style';
        ele.appendChild(document.createTextNode(cssContent));
        document.head.appendChild(ele);
        this.send({ 'type': 'call_method', 'data': 'handle_resize' });
    }
}
exports.ThemeManagerView = ThemeManagerView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdGhlbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsZ0NBQStCO0FBQy9CLGlDQUFpQztBQUNqQyxpREFBZ0Q7QUFHaEQsTUFDTSxpQkFBa0IsU0FBUSxPQUFPLENBQUMsY0FBYztJQUNsRCxRQUFRO1FBQ0osT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQ3pELFdBQVcsRUFBRSxtQkFBbUI7WUFDaEMsYUFBYSxFQUFFLG9CQUFvQjtZQUNuQyxxQkFBcUIsRUFBRSxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPO1lBQ3pELFVBQVUsRUFBRSxrQkFBa0I7WUFDOUIsWUFBWSxFQUFFLG9CQUFvQjtZQUNsQyxvQkFBb0IsRUFBRSxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPO1NBQzNELENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FDSjtBQVpELDhDQVlDO0FBR0QsTUFDTSxnQkFBaUIsU0FBUSxlQUFRO0lBRW5DLE1BQU07UUFDRixLQUFLLENBQUMsTUFBTSxFQUFFLENBQUE7UUFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFBO0lBQ3hELENBQUM7SUFFRCxrQkFBa0I7UUFDZCxPQUFPLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxDQUFDLENBQUE7UUFDbkQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFBO0lBQy9DLENBQUM7SUFFRCxXQUFXO1FBQ1AsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUE7SUFDN0IsQ0FBQztJQUVELFFBQVEsQ0FBQyxVQUFrQjtRQUN2QixJQUFJLFVBQVUsSUFBSSxTQUFTLEVBQUM7WUFDeEIsT0FBTTtTQUNUO1FBQ0QsSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUNsRCxJQUFJLEdBQUcsRUFBQztZQUNKLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQ2pDO1FBQ0QsR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDckMsR0FBRyxDQUFDLEVBQUUsR0FBRyxlQUFlLENBQUE7UUFDeEIsR0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7UUFDcEQsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFDLE1BQU0sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBQyxDQUFDLENBQUE7SUFDL0QsQ0FBQztDQUNKO0FBL0JELDRDQStCQyJ9